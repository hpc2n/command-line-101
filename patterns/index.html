<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://hpc2n.github.io/linux-command-line-101/patterns/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Patterns and scripting - Linux Command Line 101</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_markdown_exec_pyodide.css" rel="stylesheet" />
        <link href="../assets/_markdown_exec_ansi.css" rel="stylesheet" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
        <link href="../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Patterns and scripting";
        var mkdocs_page_input_path = "patterns.md";
        var mkdocs_page_url = "/linux-command-line-101/patterns/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../images/logo-cli-naiss.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../intro/">Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../cli/">The command line (CLI)</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../pipesfilters/">Pipes and filters</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../filesystem/">The File System</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../editors/">Editors</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Patterns and scripting</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#grep">grep</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#find">find</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#awk">awk</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#wild__cards">Wild cards</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#regular__expressions">Regular Expressions</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#scripting">Scripting</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#more__advanced__example">More advanced example</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../hints/">Hints and tricks</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../summary/">Summary</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Extras</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tree/">Install tree</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../connections/">Linux system overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../linux-terminology/">Linux terminology</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../more-commands.md">More commands</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../data/">Data handling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cheat/">Linux cheat sheet</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Linux Command Line 101</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Patterns and scripting</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="patterns__and__scripting">Patterns and scripting<a class="headerlink" href="#patterns__and__scripting" title="Permanent link">&para;</a></h1>
<p>This section will look at finding patterns (<a href="#grep">grep</a>, <a href="#awk">awk</a>, <a href="#wild__cards">wild cards</a>, <a href="#regular__expressions">regular expressions</a>) and <a href="#scripting">scripting</a>.  </p>
<div class="admonition note">
<p class="admonition-title">Learning objectives</p>
<p><strong>Questions</strong> </p>
<ul>
<li>How do I find out if a specific pattern is in a file?</li>
<li>What are regular expressions?</li>
<li>What is a script?</li>
<li>How do I write a script? </li>
</ul>
<p><strong>Objectives</strong> </p>
<ul>
<li>Learn about finding patterns</li>
<li>Learn to use <code>grep</code>, <code>find</code>, (and<code>awk</code>)</li>
<li>Learn to use wild cards</li>
<li>Learn to use regular expressions</li>
<li>Learn how to make a simple script </li>
</ul>
</div>
<p>Here you will find descptions on how to search for files with specific patterns. </p>
<div class="admonition hint">
<p class="admonition-title">Code along!</p>
<p>Try out / code along for some of these examples. </p>
<p>You can use the contents of the directory <code>/exercises/patterns</code> that you got from the downloaded tarball (<a href="https://github.com/hpc2n/intro-linux/raw/refs/heads/main/exercises.tar.gz">exercises.tar.gz</a>) to play with. If you have not done so already, right-click and save to download, or right-click and copy the url, then do <code>wget THE-URL-YOU-COPIED</code> in a terminal window to download it there. Then do <code>tar -zxvf patterns.tar.gz</code> to unpack.  </p>
</div>
<h2 id="grep">grep<a class="headerlink" href="#grep" title="Permanent link">&para;</a></h2>
<p>This command searches for patterns in text files. </p>
<p><strong>Syntax:</strong> </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>grep<span class="w"> </span><span class="o">[</span>options<span class="o">]</span><span class="w"> </span><span class="o">[</span>FILE<span class="o">]</span>
</span></code></pre></div>
<p>FILE is the name of whatever file you want to look at. </p>
<p>Some commonly used options are: </p>
<ul>
<li><strong>-i</strong>: ignore case</li>
<li><strong>-o</strong>: only output the instance of the pattern you search for, not the full line </li>
<li><strong>-e</strong>: use a regular expression as pattern for what you search for</li>
<li><strong>-c</strong>: do not output the line, just print a count of matching lines </li>
<li><strong>-n</strong>: Prefix  each  line of output with the 1-based line number within its input file.</li>
<li><strong>-r</strong>: Read  all  files  under  each  directory, recursively. If no file operand is given, grep searches the working directory. </li>
</ul>
<p>See <code>man grep</code> for more options. </p>
<p><strong>Examples</strong> </p>
<div class="admonition tip">
<p class="admonition-title">Code along</p>
<p>A good file to use here is <code>fil.txt</code> in the <code>exercises/patterns</code> directory. You will also use <code>newfile.txt</code> and <code>fil.txt</code> in the same directory. </p>
</div>
<div class="admonition example">
<p class="admonition-title">Find the pattern &lsquo;word&rsquo; in FILE</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>grep<span class="w"> </span><span class="s1">&#39;word&#39;</span><span class="w"> </span>FILE
</span></code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">Find the pattern &lsquo;word&rsquo; recursively under the directory path/to/dir</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>grep<span class="w"> </span>-rine<span class="w"> </span><span class="s1">&#39;word&#39;</span><span class="w"> </span>path/to/dir
</span></code></pre></div>
</div>
<div class="admonition exercise">
<p class="admonition-title">Try finding the pattern <code>string</code> in <code>newfile.txt</code></p>
<p>This file is also located in the <code>exercises/patterns</code> directory. </p>
</div>
<details class="solution">
<summary>Click to reveal solution</summary>
<p><img 3px_="3px;" 400px_float:="400px;float:" alt="grep string" right_padding:="right;padding:" src="../images/grepstring.png" style="&quot;width:" /></p>
</details>
<p><br></p>
<div class="admonition example">
<p class="admonition-title">Find the instances of the word &lsquo;string&rsquo; in file.txt and count them</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>grep<span class="w"> </span>-o<span class="w"> </span>-i<span class="w"> </span>string<span class="w"> </span>file.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
</span></code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">Find the lines with instances of &lsquo;string&rsquo; in file.txt and output them to file.out</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>grep<span class="w"> </span>string<span class="w"> </span>file.txt<span class="w"> </span>&gt;<span class="w"> </span>file.out
</span></code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">Find the lines with instances of &lsquo;string&rsquo; in file.txt and append them to file.out</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>grep<span class="w"> </span>string<span class="w"> </span>file.txt<span class="w"> </span>&gt;&gt;<span class="w"> </span>file.out
</span></code></pre></div>
</div>
<h2 id="find">find<a class="headerlink" href="#find" title="Permanent link">&para;</a></h2>
<p>The <code>find</code> command is used for file and directory search. You can search by name, size, modification time, or content. </p>
<p><strong>Syntax</strong></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>find<span class="w"> </span><span class="o">[</span>path<span class="o">]</span><span class="w"> </span><span class="o">[</span>options<span class="o">]</span><span class="w"> </span><span class="o">[</span>expression<span class="o">]</span>
</span></code></pre></div>
<ul>
<li><strong>path</strong> is the starting directory for the search</li>
<li><strong>options</strong> are settings or conditions for the search</li>
<li><strong>expression</strong> is the criteria for filtering and locating files (for instance, only search <code>txt```files or only files named</code>docs``). </li>
</ul>
<p><strong>Useful common options</strong></p>
<ul>
<li><strong>-type f</strong>: only search for files</li>
<li><strong>-type d</strong>: only search for directories</li>
<li><strong>-name NAME</strong>: only search for files with a specific name NAME or pattern</li>
<li><strong>-size [+/-]n</strong>: Searches for files based on size. <code>+n</code> finds larger files, <code>-n</code> finds smaller files. ‘n‘ measures size in characters.</li>
<li><strong>-mtime n</strong>: Finds files based on modification time. <code>n</code> represents the number of days ago.</li>
<li><strong>-exec command {} \;</strong>: Executes a command on each file found. </li>
</ul>
<p>For more options, check <code>man find</code></p>
<p><strong>Examples</strong></p>
<div class="admonition tip">
<p class="admonition-title">Try yourself</p>
<p>You could do the searches inside <code>exercises</code> directory or inside <code>exercises/patterns</code> directory. </p>
<p>Note that <code>*</code> is a wildcard that is useful here and means a string of 0 or more characters. You will hear more about it shortly. </p>
</div>
<ol>
<li>Find all files with extension <code>.txt</code> in the directory you are standing in and below: </li>
</ol>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.txt&quot;</span>
</span></code></pre></div>
2. Find all files with <code>file</code> as part of the name in the directory <code>expressions/patterns</code> while standing in <code>exercises/script</code></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>find<span class="w"> </span>../patterns/<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*file*&quot;</span>
</span></code></pre></div>
<h2 id="awk">awk<a class="headerlink" href="#awk" title="Permanent link">&para;</a></h2>
<p>Powerful, but somewhat more advanced command! </p>
<p>This command finds patterns in a file and can perform arithmetic/string operations. You can use it to transform data files and produce formatted reports. </p>
<p>It allows the user to use variables, numeric functions, string functions, and logical operators. </p>
<p>Things <code>awk</code> can do: </p>
<ul>
<li>Scan a file line by line </li>
<li>Split each input line into fields </li>
<li>Compare input line/fields to pattern </li>
<li>Perform action(s) on matched lines </li>
</ul>
<div class="admonition example">
<p class="admonition-title">Search for the pattern &lsquo;snow&rsquo; in the file FILE and print out the first column</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>awk<span class="w"> </span><span class="s1">&#39;/snow/ {print$1}&#39;</span><span class="w"> </span>FILE
</span></code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">Print column 3 and 4 from file mydata.dat</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>awk<span class="w"> </span><span class="s1">&#39;{print $3 &quot;\t&quot; $4}&#39;</span><span class="w"> </span>mydata.dat
</span></code></pre></div>
</div>
<div class="admonition example">
<p class="admonition-title">Print column 2 and 3 from file mydata.dat, but only those rows that contain the letter &lsquo;r&rsquo;</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>awk<span class="w"> </span><span class="s1">&#39;/r/ {print $2 &quot;\t&quot; $3}&#39;</span><span class="w"> </span>mydata.dat
</span></code></pre></div>
</div>
<h2 id="wild__cards">Wild cards<a class="headerlink" href="#wild__cards" title="Permanent link">&para;</a></h2>
<p>Wild cards are useful &lsquo;stand-ins&rsquo; for one or more character or number, that you can use for instance when finding patterns or when removing/listing all files of a certain type. </p>
<p>Wild cards are also called &ldquo;glob&rdquo; or &ldquo;globbing&rdquo; patterns. </p>
<details class="globs">
<summary>Globs</summary>
<p>Globs, also known as glob (or globbing) patterns are patterns that can expand a wildcard pattern into a list of pathnames that match the given pattern. On the early versions of Linux, the command interpreters relied on a program that expanded these characters into unquoted arguments to a command: <code>/etc/glob</code> .</p>
</details>
<p><br></p>
<p><strong>Common wildcards</strong></p>
<ul>
<li><strong>?</strong> represents a single character</li>
<li><strong>*</strong> represents a string of characters (0 or more)</li>
<li><strong>[ ]</strong> represents a range</li>
<li><strong>{ }</strong> the terms are separated by commas and each term must be a wildcard or exact name</li>
<li><strong>[!]</strong>  matches any character that is NOT listed between the [ and ]. This is a logical NOT.</li>
<li>*<em>*</em> specifies an &ldquo;escape&rdquo; character, when using a subsequent special character. </li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You may need quotation marks as well around some wildcards. </p>
</div>
<div class="admonition tip">
<p class="admonition-title">Try some of the commands below</p>
<p>Useful files for these examples are found in <code>exercises/patterns</code> </p>
</div>
<div class="admonition example">
<p class="admonition-title">Some examples of use of wildcards</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>myfile?.txt
</span></code></pre></div>
<p>This matches myfile0.txt, myfile1.txt,&hellip; for all letters between a-z and numbers between 0-9. Try with <code>ls myfile?.txt</code>. </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>r*d
</span></code></pre></div>
<p>This matches red, rad, ronald, &hellip; anything starting with r and ending with d, including rd. </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>r<span class="o">[</span>a,i,o<span class="o">]</span>ck
</span></code></pre></div>
<p>This matches rack, rick, rock.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>a<span class="o">[</span>d-j<span class="o">]</span>a
</span></code></pre></div>
<p>This matches ada, afa, aja, &hellip;  and any three letter word that starts with an a and ends with an a and has any character d to j in between. Try with <code>ls a[d-j]a</code>. </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="o">[</span><span class="m">0</span>-9<span class="o">]</span>
</span></code></pre></div>
<p>This matches a range of numbers from 0 to 9. </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>cp<span class="w"> </span><span class="o">{</span>*.dat,*.c,*.pdf<span class="o">}</span><span class="w"> </span>~
</span></code></pre></div>
<p>This specifies to copy any files ending in .dat, .c, and .pdf to the user&rsquo;s homedirectory. No spaces are allowed between the commas, etc. You could test it by creating a matched file in <code>patterns</code> directory with <code>touch file.c</code> and running the above command to see it only copies that one from the <code>patterns</code> directory. </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>rm<span class="w"> </span>thisfile<span class="o">[</span>!8<span class="o">]</span>*
</span></code></pre></div>
<p>This will remove all files named thisfile*, except those that has an 8 at that position in it&rsquo;s name. Try running it in the <code>patterns</code> directory! Do <code>ls</code> before and after to see the change. Remember, you can always recreate the directory <code>patterns</code> by untar&rsquo;ing it again.  </p>
</div>
<h2 id="regular__expressions">Regular Expressions<a class="headerlink" href="#regular__expressions" title="Permanent link">&para;</a></h2>
<p>Regular Expressions are a type of globbing patterns that are used when you are working with text. </p>
<p>Regular Expressions can be used with programs like grep, find and many others. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your regular expressions does not do as you expect, you may need to use single quotation marks around the sentence and you may also have to use backslashes on every single special character.</p>
</div>
<p>Some common examples of regular expressions: </p>
<ul>
<li><strong>.</strong> matches any single character. Same as <strong>?</strong> in standard wildcard expressions. </li>
<li><strong>\</strong> is used as an &ldquo;escape&rdquo; character for a subsequent special character. </li>
<li><strong>.</strong>* is used to match any string, equivalent to * in standard wildcards.</li>
<li><strong>*</strong> the proceeding item is matched zero or more times. ie. n* will match n, nn, nnnn, nnnnnnn but not na or any other character.</li>
<li><strong>^</strong> means &ldquo;the beginning of the line&rdquo;. So &ldquo;^a&rdquo; means find a line starting with an &ldquo;a&rdquo;.</li>
<li><strong>$</strong> means &ldquo;the end of the line&rdquo;. So &ldquo;a$&rdquo; means find a line ending with an &ldquo;a&rdquo;.</li>
<li><strong>[ ]</strong> specifies a range. Same as for normal wildcards. This is an &lsquo;or&rsquo; relationship (you only need one to match).</li>
<li><strong>|</strong> This wildcard makes a logical OR relationship between wildcards. You can thus search something or something else. You may need to add a &lsquo;' before this command to avoid the shell thinking you want a pipe. </li>
<li><strong>[^]</strong> This is the equivalent of [!] in standard wildcards, i.e. it is a logical “not” and will match anything not listed within the square brackets. </li>
</ul>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>$<span class="w"> </span>cat<span class="w"> </span>myfile<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;^s.*n$&#39;</span>
</span></code></pre></div>
<p>This command searches the file myfile for lines starting with an &ldquo;s&rdquo; and ending with an &ldquo;n&rdquo;, and prints them to the standard output. </p>
</div>
<h2 id="scripting">Scripting<a class="headerlink" href="#scripting" title="Permanent link">&para;</a></h2>
<p>Scripting is used to perform complex or repetitive tasks without user intervention. All Linux commands can be used in a script including wild cards. </p>
<p>The most common reason for making a script is probably to avoid writing the same command again and again. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If it is just a one-line command you want to do again and again, then <a href="../hints#alias">&lsquo;alias&rsquo;</a> is more suited for this. </p>
</div>
<div class="admonition hint">
<p class="admonition-title">Type along!</p>
<p>The files <code>analysis.sh</code>, <code>program.sh</code>, and <code>file.dat</code> are all located in <code>exercises/scripts</code>. </p>
</div>
<div class="admonition example">
<p class="admonition-title">Simple script &lsquo;analysis.sh&rsquo;</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>grep<span class="w"> </span><span class="s1">&#39;ABCD&#39;</span><span class="w"> </span>file.dat<span class="w"> </span>&gt;<span class="w"> </span>file_filtered.dat
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>./program.sh<span class="w"> </span>&lt;<span class="w"> </span>file_filtered.dat<span class="w"> </span>&gt;<span class="w"> </span>output.dat
</span></code></pre></div>
<p>This script can be executed with <code>./analysis.sh</code> (remember to check that the <a href="../filesystem/#chmod__-__change__permissions">permission</a> for executing the script <code>analysis.sh</code> as user is set - you should also make sure <code>program.sh</code> has permissions set to execute as user). </p>
<p>To change the permissions to execute a script (here named analysis.sh), for just the user, you could do: </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>$<span class="w"> </span>chmod<span class="w"> </span>u+x<span class="w"> </span>analysis.sh
</span></code></pre></div>
<p>The above script can then be executed with</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>$<span class="w"> </span>./analysis.sh
</span></code></pre></div>
<p><strong>What it does</strong></p>
<ul>
<li>First line of the script: telling the system it should be executed in the <code>bash</code> shell, since commands differ between shells (the program loader is told to run the program <code>/bin/bash</code> as first argument). <code>#!</code> are called &ldquo;shebang&rdquo; </li>
<li>second line: search for the string <code>ABCD</code> in the file <code>file.dat</code>, then redirect the output to the file <code>file_filtered.dat</code> </li>
<li>third line: run the program <code>program.sh</code> (which counts lines on the input file: <code>wc -l $1</code>) with the file <code>file_filtered.dat</code> as input. It then redirects the output to the file <code>output.dat</code>.  </li>
</ul>
</div>
<div class="admonition example">
<p class="admonition-title">Execute a command on the output of find</p>
<p>This example script <code>imagefind.sh</code> will find all files with the extention <code>.png</code> in <code>$HOME/exercises/script/image</code> and then copy them to a directory named <code>myimages</code>. <br> 
Then it searches for files with <code>er</code> as part of the name and redirects the output to a file named <code>someimagesfiles.txt</code> </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>find<span class="w"> </span><span class="nv">$HOME</span>/exercises/script/image<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.png&quot;</span><span class="w"> </span>-exec<span class="w"> </span>cp<span class="w"> </span><span class="o">{}</span><span class="w"> </span>myimages<span class="w"> </span><span class="se">\;</span><span class="w"> </span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>find<span class="w"> </span>myimages<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*er*&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>someimagesfiles.txt
</span></code></pre></div>
</div>
<h3 id="more__advanced__example">More advanced example<a class="headerlink" href="#more__advanced__example" title="Permanent link">&para;</a></h3>
<div class="admonition example">
<p class="admonition-title">Execute a command on output of find and loop over output files</p>
<p>This example script will find all files with extension <code>.eps</code> in the current directory (and below) and then copy them to the directory <code>figures</code>. <br> 
Afterwards it creates a variable FIGFILES that contains the full path to the directory with the figures, and all the files in it. <br> 
Then follows a loop over all files. <br> 
Inside the loop we convert <code>.eps</code> files to <code>.pdf</code> files. The extra line before is just a way to avoid the newly created <code>.pdf</code> files ends up with extension <code>.eps.pdf</code>.  </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.eps&quot;</span><span class="w"> </span>-exec<span class="w"> </span>cp<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="nv">$HOME</span>/figures<span class="w"> </span><span class="se">\;</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="nv">FIGFILES</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/figures/*&quot;</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="k">for</span><span class="w"> </span>f<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$FIGFILES</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="k">do</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">    </span><span class="nv">g</span><span class="o">=</span><span class="si">${</span><span class="nv">f</span><span class="p">%.*</span><span class="si">}</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">    </span>ps2pdf<span class="w"> </span>-DEPSCrop<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$f</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$g</span><span class="s2">.pdf&quot;</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="k">done</span><span class="w"> </span>
</span></code></pre></div>
</div>
<p>For more examples of (more useful) scripts, see for instance this <a href=https://www.hostinger.com/tutorials/bash-script-example" target="_blank">list of 25 Easy Bash Script Examples</a>. </p>
<div class="admonition note">
<p class="admonition-title">Keypoints</p>
<ul>
<li>Finding files with specific patterns in their names or content can be done with <code>grep</code> and <code>find</code></li>
<li>Wildcards are stand-ins for one or more character or number and are useful for when you are finding patterns or removing/copying/listing all files of a certain type </li>
<li>Regular Expressions are a type of globbing patterns that are used when you are working with text. They can be used with <code>grep</code>, <code>find</code>, and many many others </li>
<li>Scripting is used to perform complex or repetitive tasks without user intervention. All Linux commands can be used in a script including wild cards. </li>
</ul>
</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../editors/" class="btn btn-neutral float-left" title="Editors"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../hints/" class="btn btn-neutral float-right" title="Hints and tricks">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../editors/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../hints/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../assets/_markdown_exec_pyodide.js"></script>
      <script src="../search/main.js"></script>
      <script src="../js/open_in_new_tab.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
